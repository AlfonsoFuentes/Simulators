<!-- EquipmentResultItem.razor -->
<MudExpansionPanel>
    <TitleContent>
        <div class="d-flex align-items-center">
            <MudText Typo="Typo.h6">@EquipmentResult.EquipmentName (@EquipmentResult.EquipmentType)</MudText>
            <MudSpacer />
            @if (EquipmentResult.UniqueConnectedMaterials.Any())
            {
                <MudChip T="string" Color="Color.Success" Variant="Variant.Outlined" Size="Size.Small">
                    ✓ @EquipmentResult.UniqueConnectedMaterials.Count Connected
                </MudChip>
            }
            @if (EquipmentResult.UniqueMissingMaterials.Any())
            {
                <MudChip T="string" Color="Color.Warning" Variant="Variant.Outlined" Size="Size.Small" Class="ml-2">
                    ✗ @EquipmentResult.UniqueMissingMaterials.Count Missing
                </MudChip>
            }
        </div>
    </TitleContent>
    <ChildContent>
        <!-- Materials Section -->
        <EquipmentMaterialsSection 
            ConnectedMaterials="EquipmentResult.UniqueConnectedMaterials"
            MissingMaterials="EquipmentResult.UniqueMissingMaterials" />

        <!-- Product Status Section -->
        <ProductStatusSection 
            ProductResults="EquipmentResult.ProductResults"
            BackboneCapabilities="EquipmentResult.BackboneCapabilities" />
        
        <!-- Backbone Capabilities Section -->
        @if (EquipmentResult.BackboneCapabilities.Any())
        {
            <BackboneCapabilitiesSection 
                BackboneCapabilities="EquipmentResult.BackboneCapabilities" />
        }
    </ChildContent>
</MudExpansionPanel>

@code {
    [Parameter]
    public EquipmentAnalysisResult EquipmentResult { get; set; } = new();
}